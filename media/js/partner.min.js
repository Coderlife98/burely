var reportDepo = "";

$(document).ready(function () {
  let searchObj = {};
  var target = $("#target").val();
  reportOrdTable = {
    printTable: function (search_data) {
      getpaginate(search_data, "#my_order_list", target, "Only For Id, Name.");
    },
  };
  reportOrdTable.printTable(searchObj);
  repStockManage = {
    printTable: function (search_data) {
      getpaginate(
        search_data,
        "#partner_stock_list",
        target,
        "Only For Id,Product Name."
      );
    },
  };
  repStockManage.printTable(searchObj);
  repStockProductWise = {
    printTable: function (search_data) {
      getpaginate(
        search_data,
        "#partner_stock_product_wise",
        target,
        "Only For Id,Product Name."
      );
    },
  };
  repStockProductWise.printTable(searchObj);
  repShopeeManage = {
    printTable: function (search_data) {
      getpaginate(
        search_data,
        "#shopee_list",
        target,
        "Only For Id,Product Name."
      );
    },
  };
  repShopeeManage.printTable(searchObj);
  repSaleManage = {
    printTable: function (search_data) {
      getpaginate(
        search_data,
        "#my_sale_list",
        target,
        "Only For Id,Product Name."
      );
    },
  };
  repSaleManage.printTable(searchObj);

  repWallTnxTable = {
    printTable: function (search_data) {
      getpaginate(
        search_data,
        "#member_wallet",
        target,
        "Only For Id, Amount Id."
      );
    },
  };
  repWallTnxTable.printTable(searchObj);
  repMemEarningTable = {
    printTable: function (search_data) {
      getpaginate(
        search_data,
        "#member_earning",
        target,
        "Only For Id, Amount Ref Id."
      );
    },
  };
  repMemEarningTable.printTable(searchObj);

  reportDepo = {
    printTable: function (search_data) {
      getpaginate(
        search_data,
        "#depo_transaction",
        target,
        "Only For Tnx Id, Amount"
      );
    },
  };
  reportDepo.printTable(searchObj);

  /***********************Depo Start********************************/
  $("#proceedDeposit").click(function () {
    let depositAmt = $("#depositedAmt").val();
    let depositedDate = $("#depositedDate").val();
    let imgFile = $("#depositedSlip").val();
    let remarks = $("#remarks").val();

    if (depositAmt == "") {
      toast("tst_danger", "Please input deposit amount");
    } else if (isNaN(isCheck("depositedAmt"))) {
      toast("tst_danger", "Please input deposit valid amount");
    } else if (depositedDate == "") {
      toast("tst_danger", "Please input deposited date");
    } else if (remarks == "") {
      toast("tst_danger", "Please input remarks ");
    } else if (!isCheck("payMode")) {
      toast("tst_danger", "Please select payment deposit mode");
    } else if (imgFile == "") {
      toast("tst_danger", "Please Provide valid slip image");
    } else {
      $("#proceedDeposit").html(
        '<i class="bx bx-cog bx-spin"></i> Please Wait'
      );
      var name = document.getElementById("depositedSlip").files[0].name;
      var form_data = new FormData();
      var ext = name.split(".").pop().toLowerCase();
      if (jQuery.inArray(ext, ["gif", "png", "jpg", "jpeg"]) == -1) {
        toast("tst_danger", "Please Provide Valid Image Format");
      }
      var oFReader = new FileReader();
      oFReader.readAsDataURL(document.getElementById("depositedSlip").files[0]);
      var f = document.getElementById("depositedSlip").files[0];
      var fsize = f.size || f.fileSize;
      if (fsize > 2000000) {
        toast("tst_danger", "Image File Size is very big");
      } else {
        var NwUrl = isCheck("target");
        form_data.append(
          "depositedSlip",
          document.getElementById("depositedSlip").files[0]
        );
        form_data.append("depositAmt", depositAmt);
        form_data.append("depositedDate", depositedDate);
        form_data.append("remarks", remarks);
        form_data.append("payMode", isCheck("payMode"));
        $.ajax({
          url: NwUrl,
          method: "POST",
          data: form_data,
          dataType: "json",
          contentType: false,
          cache: false,
          processData: false,
          beforeSend: function () {
            $("#Update").html(
              '<i class="bx bx-cog bx-spin"></i> Please Wait...'
            );
          },
          success: function (dataAmi) {
            $("#proceedDeposit").html('<i class="bx bx-save"></i> Submit');

            //$('#errorMsgShow').html(data);
            if (dataAmi.result == "success") {
              setTimeout(function () {
                window.location.reload(1);
              });
            }
            toast(dataAmi.result, dataAmi.msg);
          },
        });
      }
    }
  });
  $("#depo_transaction").on("click", ".amInc", function () {
    var actNbtn = $(this).attr("data-id");
    var actnstr = actNbtn.split("-");
    if (actnstr[0] == "delDepo") {
      $(".delMsg").html('<i class="fa fa-trash"></i> Delete Deposit Details');
      $(".actnData").html(
        '<i class="fa fa-exclamation-triangle"></i> Are you sure want to delete deposited details'
      );
      $("#cnfDel_id").val(actNbtn);
    }
  });

  $("#cnfDelDepoData").click(function () {
    var actNbtn = $("#actnUrl").text();
    var actnstr = actNbtn.split("-");
    var url = isCheckUrl(actnstr[1]);
    $("#cnfDelDepoData").html(
      '<i class="fa fa-spinner rotate"></i> Please Wait.....'
    );

    $.post(
      url,
      { oprType: actnstr[2] },
      function (htmlAmi) {
        $("#cnfDelDepoData").html(
          ' <i class="fa fa-trash"></i> Confirm Delete'
        );
        if (htmlAmi.icon == "1") {
          $(".actnData").html(htmlAmi.msg).fadeIn("slow").css("color", "green");
          setTimeout(function () {
            window.location.reload(1);
          }, 1500);
        } else {
          $(".actnData").html(htmlAmi.msg).fadeIn("slow").css("color", "red");
        }
      },
      "json"
    );
  });

  /***********************Depo End********************************/

  $(".amiBtnTgle").click(function () {
    let actNbtn = $(this).attr("id");
    if (actNbtn == "jnfo") {
      $("#jnfoTr").toggle();
      $("#jnfo").toggleClass("amiBtnUp amiBtnDown");
      $("i", this).toggleClass(
        "fa-angle-up fa-angle-down"
      ); /*$('#perInfoTr').hide('');*/
    } else if (actNbtn == "perInfo") {
      $("#perInfoTr").toggle();
      $("#perInfo").toggleClass("amiBtnUp amiBtnDown");
      $("i", this).toggleClass("fa fa-angle-up fa fa-angle-down");
      $("#edtPrfo").toggle();
      /* $('#jnfoTr,#bnkInfoTr,#nomineeInfoTr').hide();*/
    } else if (actNbtn == "bnkInfo") {
      $("#bnkInfoTr").toggle();
      $("#bnkInfo").toggleClass("amiBtnUp amiBtnDown");
      $("i", this).toggleClass("fa fa-angle-up fa fa-angle-down");
      /*	$('#jnfoTr,#perInfoTr,#nomineeInfoTr').hide();*/
    } else if (actNbtn == "nomineeInfo") {
      $("#nomineeInfoTr").toggle();
      $("#nomineeInfo").toggleClass("amiBtnUp amiBtnDown");
      $("i", this).toggleClass("fa fa-angle-up fa fa-angle-down");
      /*$('#jnfoTr,#perInfoTr').hide();*/
    } else if (actNbtn == "documentInfo") {
      $("#memDocument").toggle();
      $("#documentInfo").toggleClass("amiBtnUp amiBtnDown");
      $("i", this).toggleClass("fa fa-angle-up fa fa-angle-down");
      /*$('#jnfoTr,#perInfoTr').hide();*/
    }
  });
  $(".empSelectR")
    .unbind("change")
    .change(function () {
      var actNbtn = $(this).attr("id");
      if (actNbtn == "statN") {
        let isCheckUrl = isCheck("base_url") + "partner/profile/cityList";
        $("#district").html("<option>Please Wait.....</option>");
        $("#district").css("color", "#00917C");
        $.post(isCheckUrl, { id: $("#" + actNbtn).val() }, function (htmlAmi) {
          $("#district").html(htmlAmi);
          $("#district").css("color", "#4d545b");
        });
      } else if (actNbtn == "package") {
        if (!isCheck("buyerID")) {
          toast("tst_danger", "Please provide buyer member id.");
          point("buyerID");
          $("#package").val("").change();
        } else {
          let loader =
            '<img src="' +
            isCheck("base_url") +
            'media/images/loader.gif" style="height:10px; width:60px;">';
          $("#pcAmt").html(loader);
          $("#pcBv").html(loader);
          $("#pcNetAmt").html(loader);
          let isCheckUrl =
            isCheck("base_url") + "mlm_software/admin/sale/getPackage";
          $.post(
            isCheckUrl,
            { id: $("#" + actNbtn).val() },
            function (htmlAmi) {
              // $('#myResultShow').html(htmlAmi);
              if (htmlAmi.adClass == "tst_success") {
                $("#pcAmt").html(
                  '<i class="bx bx-rupee inrP"></i> ' + htmlAmi.pack_price
                );
                $("#pcBv").html(htmlAmi.pack_bv);
                if (isCheck("packQty")) {
                  let pcNetAmt = htmlAmi.pack_price * isCheck("packQty");
                  $("#pcNetAmt").html(
                    '<i class="bx bx-rupee inrP"></i> ' + pcNetAmt.toFixed(2)
                  );
                } else {
                  $("#pcNetAmt").html("-----");
                }
              } else {
                toast(htmlAmi.adClass, htmlAmi.text);
              }
            },
            "json"
          );
        }
      }
    });
  $(".delAction")
    .unbind("click")
    .click(function () {
      let actNbtn = $(this).attr("data-id");
      let actnstr = actNbtn.split("-");
      $(".actnData").css("color", "#f56e50");
      if (actnstr[0] == "delAadhar") {
        $("#cnfDel_id").val(actNbtn);
        $(".delMsg").html(
          '<i class="bx bx-trash"></i> Delete Aadhaar Document'
        );
        $(".actnData").html("Are you want to delete aadhaar document");
      } else if (actnstr[0] == "delPan") {
        $("#cnfDel_id").val(actNbtn);
        $(".delMsg").html('<i class="bx bx-trash"></i> Delete Pan Document');
        $(".actnData").html("Are you want to delete pan document");
      } else if (actnstr[0] == "delBankpass") {
        $("#cnfDel_id").val(actNbtn);
        $(".delMsg").html(
          '<i class="bx bx-trash"></i> Delete Passbook Document'
        );
        $(".actnData").html("Are you want to delete passbook document");
      } else if (actnstr[0] == "midoc") {
        $("#docfileUpload").toggle();
        $("html,body").animate(
          { scrollTop: $("#docfileUpload").offset().top },
          "slow"
        );
        $("#docUrlActn").html(actNbtn);
      }
    });
  $(".imgUploadActn")
    .unbind("click")
    .click(function () {
      var imgFile = $("#docfile").val();
      if (imgFile == "") {
        toast("tst_danger", "Please select profile image");
      } else {
        var name = document.getElementById("docfile").files[0].name;
        var form_data = new FormData();
        var ext = name.split(".").pop().toLowerCase();
        if (jQuery.inArray(ext, ["gif", "png", "jpg", "jpeg"]) == -1) {
          toast("tst_danger", "Please provide valid image format");
        }
        var oFReader = new FileReader();
        oFReader.readAsDataURL(document.getElementById("docfile").files[0]);
        var f = document.getElementById("docfile").files[0];
        var fsize = f.size || f.fileSize;
        if (fsize > 2000000) {
          toast("tst_danger", "Image File Size is very big");
        } else {
          let docUrlActn = $("#docUrlActn").text();
          let target = docUrlActn.split("-");
          let isCheckUrl = isCheck("base_url") + target[2];
          form_data.append("file", document.getElementById("docfile").files[0]);
          form_data.append("id", $("#id").val());
          form_data.append("actn", target[0]);
          form_data.append("docType", target[1]);
          $.ajax({
            url: isCheckUrl,
            method: "POST",
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false,
            beforeSend: function () {
              $("#Update")
                .html('<i class="bx bx-cog bx-spin"></i> Wait....')
                .css("padding", "6px 13.2px 6px 16.5px");
            },
            success: function (data) {
              $("#Update")
                .css("padding", "6px 10px 6px 16.7px")
                .html('<i class="bx bx-save"></i> Upload');
              toast(data.class, data.text);
              if (target[1] == "edtAadhar") {
                $("#adrImg").attr("src", isCheck("base_url") + data.img_loc);
              } else if (target[1] == "pancard") {
                $("#panImg").attr("src", isCheck("base_url") + data.img_loc);
              } else if (target[1] == "passbook") {
                $("#passBookImg").attr(
                  "src",
                  isCheck("base_url") + data.img_loc
                );
              }
            },
          });
        }
      }
    });
  $("#getProfileImageChange").click(function () {
    $("#uploadMemberIMg").toggle();
  });
  $(".memberImgUploadActn").click(function () {
    var imgFile = $("#mem_file").val();
    if (imgFile == "") {
      toast("tst_danger", "Please select profile image");
    } else {
      var name = document.getElementById("mem_file").files[0].name;
      var form_data = new FormData();
      var ext = name.split(".").pop().toLowerCase();
      if (jQuery.inArray(ext, ["gif", "png", "jpg", "jpeg"]) == -1) {
        toast("tst_danger", "Please provide valid image format");
      }
      var oFReader = new FileReader();
      oFReader.readAsDataURL(document.getElementById("mem_file").files[0]);
      var f = document.getElementById("mem_file").files[0];
      var fsize = f.size || f.fileSize;
      if (fsize > 2000000) {
        toast("tst_danger", "Image File Size is very big");
      } else {
        let isCheckUrl = isCheck("base_url") + "partner/profile/edit";
        form_data.append("file", document.getElementById("mem_file").files[0]);
        form_data.append("actn", "profileImg");
        $.ajax({
          url: isCheckUrl,
          method: "POST",
          data: form_data,
          dataType: "JSON",
          contentType: false,
          cache: false,
          processData: false,
          beforeSend: function () {
            $("#proBtnUpload").html(
              '<i class="bx bx-cog bx-spin"></i> Wait....'
            );
          },
          success: function (data) {
            $("#proBtnUpload").html('<i class="bx bx-save"></i> Upload');
            toast(data.class, data.text);
            $("#setPrImg").attr("src", isCheck("base_url") + data.img_loc);
            $("#mi_pro_img").attr("src", isCheck("base_url") + data.img_loc);
          },
        });
      }
    }
  });
  $("#deleteCnfrMtn")
    .unbind("click")
    .click(function () {
      let actNbtn = $("#cnfDel_id").val();
      let target = actNbtn.split("-");
      let isCheckUrl = isCheck("base_url") + target[1];
      $("#deleteCnfrMtn")
        .html('<i class="bx bx-cog bx-spin"></i> Please Wait')
        .removeClass("btn-outline-danger")
        .addClass("btn-outline-success");
      if (target[0] == "delTempProduct") {
        $.post(
          isCheckUrl,
          { actn: target[2] },
          function (htmlAmi) {
            if (htmlAmi.icon == "1") {
              $(".actnData").html(htmlAmi.text).css("color", "#219C07");
              setTimeout(function () {
                window.location.reload(1);
              }, 1500);
            } else {
              $(".actnData").html(htmlAmi.text).css("color", "#E93700");
            }
          },
          "json"
        );
      } else if (target[0] == "delDepo") {
        $.post(
          isCheckUrl,
          { actn: target[2] },
          function (htmlAmi) {
            if (htmlAmi.icon == "1") {
              $(".actnData").html(htmlAmi.text).css("color", "#219C07");
              setTimeout(function () {
                window.location.reload(1);
              }, 1500);
            } else {
              $(".actnData").html(htmlAmi.text).css("color", "#E93700");
            }
          },
          "json"
        );
      } else if (target[0] == "shopee") {
        $.post(
          isCheckUrl,
          { actn: target[2] },
          function (htmlAmi) {
            if (htmlAmi.icon == "1") {
              $(".actnData").html(htmlAmi.text).css("color", "#219C07");
              $("#deleteModel").modal("hide");
              $("#deleteCnfrMtn")
                .html('Confirm Delete <i class="bx bx-trash"></i>')
                .addClass("btn-outline-danger")
                .removeClass("btn-outline-success");
            } else {
              $(".actnData").html(htmlAmi.text).css("color", "#E93700");
            }
          },
          "json"
        );
      } else {
        $.post(
          isCheckUrl,
          { actn: "cnfrmDelete", docType: target[0] },
          function (htmlAmi) {
            $(".actnData").html(htmlAmi.text);
            $(".actnData").css("color", "#219C07");
            if (target[0] == "delAadhar") {
              $("#adrImg").attr("src", isCheck("base_url") + htmlAmi.img_loc);
            } else if (target[0] == "delPan") {
              $("#panImg").attr("src", isCheck("base_url") + htmlAmi.img_loc);
            } else if (target[0] == "delBankpass") {
              $("#passBookImg").attr(
                "src",
                isCheck("base_url") + htmlAmi.img_loc
              );
            }
            $("#deleteCnfrMtn")
              .html('Confirm Delete <i class="bx bx-trash"></i>')
              .removeClass("btn-outline-success")
              .addClass("btn-outline-danger");
            setTimeout(function () {
              window.location.reload(1);
            }, 1500);
          },
          "json"
        );
      }
    });
  $(".memAction")
    .unbind("click")
    .click(function () {
      let getId = $(this).attr("id");
      if (getId == "change_password") {
        let isCheckUrl =
          isCheck("base_url") + "partner/profile/change_password";
        if (!isCheck("previous_pass")) {
          toast("tst_danger", "Please provide previous password");
          point("previous_pass");
        } else if (!isCheck("new_password")) {
          toast("tst_danger", "Please provide new password");
          point("new_password");
        } else if (!isCheck("confirm_password")) {
          toast("tst_danger", "Please provide confirm password");
          point("confirm_password");
        } else if (isCheck("confirm_password") != isCheck("new_password")) {
          toast(
            "tst_warning",
            "Confirm password doesn't match with new password"
          );
          point("confirm_password");
        } else {
          $.post(
            isCheckUrl,
            {
              pre_pass: isCheck("previous_pass"),
              new_pass: isCheck("new_password"),
            },
            function (htmlAmi) {
              toast(htmlAmi.class, htmlAmi.text);
              if ((htmlAmi.class = "tst_success")) {
                setTimeout(function () {
                  window.location.reload(1);
                }, 1500);
              }
            },
            "json"
          );
        }
      } else if (getId == "makePayment") {
        if (!isCheck("paybleAmt")) {
          toast("tst_danger", "Please input payble amount");
          point("paybleAmt");
        } else if (isNaN(isCheck("paybleAmt"))) {
          toast("tst_warning", "Please input valid payble amount");
          point("paybleAmt");
        } else {
          $.post(
            isCheck("target"),
            { paybleAmt: isCheck("paybleAmt"), orderID: isCheck("orderID") },
            function (htmlAmi) {
              toast(htmlAmi.adClass, htmlAmi.text);
              if ((htmlAmi.adClass = "tst_success")) {
                setTimeout(function () {
                  window.location.href = htmlAmi.targetUrl;
                }, 1500);
              }
            },
            "json"
          );
        }
      } else if (getId == "proceedToPayment") {
        if (!isCheck("paybleAmt")) {
          toast("tst_danger", "Please input payble amount");
          point("paybleAmt");
        } else if (isNaN(isCheck("paybleAmt"))) {
          toast("tst_warning", "Please input valid payble amount");
          point("paybleAmt");
        } else {
          $.post(
            isCheck("target"),
            { paybleAmt: isCheck("paybleAmt"), saleID: isCheck("saleID") },
            function (htmlAmi) {
              toast(htmlAmi.adClass, htmlAmi.text);
              if ((htmlAmi.adClass = "tst_success")) {
                setTimeout(function () {
                  window.location.href = htmlAmi.targetUrl;
                }, 1500);
              }
            },
            "json"
          );
        }
      } else if (getId == "getNext") {
        if (isCheck("miAction") == "1") {
          $.post(
            isCheck("target"),
            {
              mem_code: isCheck("mem_code"),
              mem_name: isCheck("mem_name"),
              gender: isCheck("gender"),
              emailId: isCheck("emailId"),
              dob: isCheck("date_of_birth"),
              mob_nu: isCheck("mob_nu"),
              password: isCheck("password"),
              confPass: isCheck("confPass"),
              miAction: isCheck("miAction"),
            },
            function (htmlAmi) {
              toastMultiShow(htmlAmi.adClass, htmlAmi.msg, htmlAmi.icon);
              if (htmlAmi.adClass == "tst_success") {
                $("#miAction").val(htmlAmi.actn);
                $("#shoppId").val(htmlAmi.shopId);
                $("#personalInfo").hide();
                $("#communicationInfo,#getPrevious").show();
                $("#commDet").addClass("cmpltVzrd");
              }
            },
            "json"
          );
        } else if (isCheck("miAction") == "2") {
          $.post(
            isCheck("target"),
            {
              address: isCheck("address"),
              statN: isCheck("statN"),
              district: isCheck("district"),
              zipcode: isCheck("zipcode"),
              pan_no: isCheck("pan_no"),
              aadhaar_no: isCheck("aadhaar_no"),
              shoppId: isCheck("shoppId"),
              miAction: isCheck("miAction"),
            },
            function (htmlAmi) {
              toastMultiShow(htmlAmi.adClass, htmlAmi.msg, htmlAmi.icon);
              if (htmlAmi.adClass == "tst_success") {
                $("#personalInfo,#communicationInfo,#docInfo").hide();
                $("#getPrevious,#bankingInfo").show();
                $("#miAction").val(htmlAmi.actn);
                $("#bnkDet").addClass("cmpltVzrd");
              }
            },
            "json"
          );
        } else if (isCheck("miAction") == "3") {
          $.post(
            isCheck("target"),
            {
              bName: isCheck("bName"),
              bankAc: isCheck("bankAc"),
              bnkIFSC: isCheck("bnkIFSC"),
              brName: isCheck("brName"),
              nomiName: isCheck("nomiName"),
              nomineeRel: isCheck("nomineeRel"),
              NomAddr: isCheck("NomAddr"),
              miAction: isCheck("miAction"),
              shoppId: isCheck("shoppId"),
            },
            function (htmlAmi) {
              toastMultiShow(htmlAmi.adClass, htmlAmi.msg, htmlAmi.icon);
              if (htmlAmi.adClass == "tst_success") {
                $("#personalInfo,#bankingInfo").hide();
                $("#getPrevious,#docInfo").show();
                $("#miAction").val(htmlAmi.actn);
                $("#docDet").addClass("cmpltVzrd");
                $("#getNext").html('<i class="bx bx-save"></i> Save');
              }
            },
            "json"
          );
        } else if (isCheck("miAction") == "4") {
          setTimeout(function () {
            window.location.reload(1);
          }, 1500);
        }
      } else if (getId == "getPrevious") {
        if (isCheck("miAction") == "2") {
          $("#getPrevious,#communicationInfo,#bankingInfo").hide();
          $("#personalInfo").show();
          $("#miAction").val("1");
          $("#commDet").removeClass("cmpltVzrd");
        } else if (isCheck("miAction") == "3") {
          $("#personalInfo,#bankingInfo,#docInfo").hide();
          $("#getPrevious,#communicationInfo").show();
          $("#miAction").val("2");
          $("#bnkDet").removeClass("cmpltVzrd");
        } else if (isCheck("miAction") == "4") {
          $("#personalInfo,#docInfo,#communicationInfo").hide();
          $("#getPrevious,#bankingInfo,#getNext").show();
          $("#miAction").val("3");
          $("#docDet").removeClass("cmpltVzrd");
          $("#getNext").html('Next <i class="fas fa-arrow-right "></i>');
        }
      } else if (getId == "saleCnfrm") {
        if (!isCheck("ordSts")) {
          toast("tst_danger", "Please choose order option");
          point("ordSts");
        } else {
          let adCls = "";
          let rmvCls = "";
          let isCheckUrl =
            isCheck("base_url") + $("#getTargetForFrenchise").html();
          if (isCheck("ordSts") == "Delivered") {
            adCls = "delevered";
            rmvCls = "miCancel";
          } else {
            rmvCls = "delevered";
            adCls = "miCancel";
          }

          $.post(
            isCheckUrl,
            { ordSts: isCheck("ordSts"), orderID: isCheck("orderID") },
            function (htmlAmi) {
              toast(htmlAmi.adClass, htmlAmi.text);

              if (htmlAmi.adClass == "tst_success") {
                $("#orderStsDisply")
                  .html(isCheck("ordSts"))
                  .addClass(adCls)
                  .removeClass(rmvCls);
              }
			  window.location.reload(true);
            },
            "json"
          );
        }
      } else if (getId == "buy_saller") {
        $("i", this).toggleClass("bx-plus bx-minus");
        $("#searchByr,#byrDetails,#slrDetails").toggle();
      } else if (getId == "findBuyer") {
        if (!isCheck("buyerID")) {
          toast("tst_danger", "Please input buyer member id");
        } else {
          let isCheckUrl = isCheck("base_url") + $("#getTargetForBuyr").html();
          $.post(
            isCheckUrl,
            { buyerID: isCheck("buyerID") },
            function (getData) {
              //$('#myResultShow').html(getData);
              if (getData.adClass == "tst_success") {
                $("#buy_saller i").toggleClass("bx-plus bx-minus");
                $("#byrPic").attr("src", getData.byrPic);
                $("#byrCode").html(getData.byrCode);
                $("#byrID").val(getData.byrID);
                $("#byrName").html(getData.byrName);
                $("#byrAddr").html(getData.byrAddr);
                $("#byrContct").html(getData.byrContct);
                $("#byrEmail").html(getData.byrEmail);
                $("#searchByr").hide();
                $("#byrDetails").show();
                if (getData.tempSaleList != null) {
                  if (getData.tempSaleList.miTxt == "success") {
                    $("#data_not_found").remove();
                    $("#tempKartTble tbody").append(
                      getData.tempSaleList.getOrd
                    );
                    $("#grantTotalAmt").html(getData.tempSaleList.grandTotal);
                    $("#netPaybleAmt").html(getData.tempSaleList.paybleAmt);
                    //$('#texPer').html(getData.tempSaleList.texPer);
                    //$('#shipInC').html(getData.tempSaleList.shipInC);
                  }
                }
                toast(getData.adClass, getData.msg);
              } else {
                toast(getData.adClass, getData.msg);
              }
            },
            "json"
          );
        }
      } else if (getId == "findBuyerForPackage") {
        if (!isCheck("buyerID")) {
          toast("tst_danger", "Please input buyer member id");
        } else {
          let isCheckUrl = isCheck("base_url") + $("#getTargetForBuyr").html();
          $.post(
            isCheckUrl,
            { buyerID: isCheck("buyerID") },
            function (getData) {
              //$('#myResultShow').html(getData);
              if (getData.adClass == "tst_success") {
                $("#buy_saller i").toggleClass("bx-plus bx-minus");
                $("#byrPic").attr("src", getData.byrPic);
                $("#byrCode").html(getData.byrCode);
                $("#byrID").val(getData.byrID);
                $("#byrName").html(getData.byrName);
                $("#byrAddr").html(getData.byrAddr);
                $("#byrContct").html(getData.byrContct);
                $("#byrEmail").html(getData.byrEmail);
                $("#searchByr").hide();
                $("#byrDetails").show();
                if (getData.tempSaleList != null) {
                  if (getData.tempSaleList.miTxt == "success") {
                    $("#data_not_found").remove();
                    $(getData.tempSaleList.getOrd).insertAfter(
                      $("#tempKartTble tr.dynamicRows:last")
                    );
                    $("#grantTotalAmt").html(getData.tempSaleList.grandTotal);
                    $(".amisingh").show();
                    //$('#netPaybleAmt').html(getData.tempSaleList.paybleAmt);$('#texPer').html(getData.tempSaleList.texPer);
                  }
                }
                toast(getData.adClass, getData.msg);
              } else {
                toast(getData.adClass, getData.msg);
              }
            },
            "json"
          );
        }
      } else if (getId == "findSeller") {
        if (!isCheck("sellerID")) {
          toast("tst_danger", "Please input seller member id");
        } else {
          let isCheckUrl = isCheck("base_url") + $("#getTargetForBuyr").html();
          $.post(
            isCheckUrl,
            { buyerID: isCheck("sellerID") },
            function (getData) {
              //$('#myResultShow').html(getData);
              if (getData.adClass == "tst_success") {
                $("#buy_saller i").toggleClass("bx-plus bx-minus");
                $("#slrPic").attr("src", getData.byrPic);
                $("#slrCode").html(getData.byrCode);
                $("#slrID").val(getData.byrID);
                $("#slrName").html(getData.byrName);
                $("#slrAddr").html(getData.byrAddr);
                $("#slrContct").html(getData.byrContct);
                $("#slrEmail").html(getData.byrEmail);
                $("#searchByr").hide();
                $("#slrDetails").show();
                if (getData.tempSaleList != null) {
                  if (getData.tempSaleList.miTxt == "success") {
                    $("#data_not_found").remove();
                    $("#tempKartTble tbody").append(
                      getData.tempSaleList.getOrd
                    );
                    $("#grantTotalAmt").html(getData.tempSaleList.grandTotal);
                    /*$('#netPaybleAmt').html(getData.tempSaleList.paybleAmt);
							$('#texPer').html(getData.tempSaleList.texPer);
							$('#shipInC').html(getData.tempSaleList.shipInC);*/
                  }
                }
                toast(getData.adClass, getData.msg);
              } else {
                toast(getData.adClass, getData.msg);
              }
            },
            "json"
          );
        }
      }
    });

  $(".actionCmd")
    .unbind("click")
    .click(function () {
      let actNbtn = $(this).attr("id");
      if (actNbtn == "amiWthDrw") {
        if (!isCheck("wthdr_amt")) {
          toast("tst_danger", "Please input withdraw amount.");
          point("wthdr_amt");
        } else if (isNaN(isCheck("wthdr_amt"))) {
          toast("tst_danger", "Please input valid amount");
          point("wthdr_amt");
        } else {
          $.post(
            isCheck("target"),
            { amt: isCheck("wthdr_amt") },
            function (htmlAmi) {
              toast(htmlAmi.adClass, htmlAmi.msg);
              $("#avlBal").html(htmlAmi.avlBal);
            },
            "json"
          );
        }
      } else if (actNbtn == "makePay") {
        if (!isCheck("slrID")) {
          toast("tst_danger", "Please input seller member id.");
          point("sellerID");
        } else {
          window.location.href = isCheck("targetUrl") + isCheck("slrID");
        }
      } else if (actNbtn == "cnfPackageItemDelete") {
        let actNbtn = $("#cnfSaleDel_id").val();
        let target = actNbtn.split("-");
        let sum = "";
        let byrID = $("#byrID").val();
        let byrUser = $("#byrID").val();
        let isCheckUrl = isCheck("base_url") + target[1] + target[0];
        $.post(
          isCheckUrl,
          {
            actn: target[0],
            dataId: target[2],
            byrID: byrID,
            byrUser: isCheck("buyerID"),
          },
          function (htmlAmi) {
            //$('#delSaleData').html(htmlAmi);
            $("#delSaleData").css("color", "#E93700");
            if (htmlAmi.adClass == "tst_success") {
              //$("#myResultShow").html(htmlAmi.srCnt);
              //$.each(htmlAmi.srCnt,function(index,value){sum=1+index;$("#myResultShow").html(sum+".");});
              $.each(htmlAmi.srCnt, function (index, value) {
                sum = 1 + index;
                $("#serial-" + value).html(sum + ".");
              });
              $("#delArv-" + htmlAmi.id).remove();
              $("#grantTotalAmt").html(htmlAmi.grandTotal);
              $("#netPaybleAmt").html(htmlAmi.paybleAmt);
              $("#delSaleData")
                .html(htmlAmi.msg + "  ===" + htmlAmi.srCnt)
                .css("color", "#20AA00"); //f56e50
              $("#deleteSaleModel").modal("hide");
            } else {
              $("#delSaleData").html(htmlAmi.msg).css("color", "#f56e50");
            }
          },
          "json"
        );

        /*if(!isCheck('slrID')){toast('tst_danger','Please input seller member id.'); point('sellerID');}
			else{window.location.href=isCheck('targetUrl')+isCheck('slrID');}*/
      } else if (actNbtn == "packageSaleProceed") {
        $(".arvDi").hide();
        $("#packageSaleProceed").hide();
        $(".kartTrash").hide();
        $(".mkPaym").show();
        $("#packageSale").show();
      } else if (actNbtn == "memMin") {
        $("#memberD").hide();
        $("#searchByr").show();
      } else if (actNbtn == "findFrPackageBuyer") {
        if (!isCheck("buyerID")) {
          toast("tst_danger", "Please input buyer member id");
        } else {
          let isCheckUrl = isCheck("base_url") + $("#getTargetForBuyr").html();
          $.post(
            isCheckUrl,
            { buyerID: isCheck("buyerID"), packAmt: isCheck("packAmt") },
            function (getData) {
              if (getData.adClass == "tst_success") {
                toast(getData.adClass, getData.msg);
                $("#searchByr").hide();
                $("#memberD").show();
                $("#memN").html(getData.name);
                $("#memID").html(getData.username);
                $("#memMobile").html(getData.mobile);
                $("#emailID").html(getData.email);
              } else {
                toast(getData.adClass, getData.msg);
              }
            },
            "json"
          );
        }
      } else if (actNbtn == "actvtBtn") {
        $("#actvtBtn").html(
          '<i class="bx bx-loader-circle bx-spin"></i> Please Wait'
        );

        let isCheckUrl =
          isCheck("base_url") +
          $("#getTargetForBuyr").html().substring(0, 16) +
          "activate";
        $.post(
          isCheckUrl,
          {
            buyerID: isCheck("buyerID"),
            packAmt: isCheck("packAmt"),
            pcId: isCheck("pcId"),
          },
          function (getData) {
            if (getData.adClass == "tst_success") {
              toast(getData.adClass, getData.msg);
              setTimeout(function () {
                window.location.href = getData.trgtUrl;
              }, 2000);
              $("#actvtBtn").html("Activate Account"); //$('#actvtBtn').attr('id','miPrintReceipt')
            } else {
              toast(getData.adClass, getData.msg);
              $("#actvtBtn").html(
                '<i class="bx bx-loader-circle bx-spin"></i> Please Wait'
              );
            }
          },
          "json"
        );
      }

      /*else if(actNbtn=='miPrintReceipt')
		{	
			toast('tst_success','You are ready to print bill');
			
			}*/
    });

  $(".shopeeImgUploadActn")
    .unbind("click")
    .click(function () {
      var imgFile = $("#docfile").val();
      if (imgFile == "") {
        toast("tst_danger", "Please select profile image");
      } else {
        var name = document.getElementById("docfile").files[0].name;
        var form_data = new FormData();
        var ext = name.split(".").pop().toLowerCase();
        if (jQuery.inArray(ext, ["gif", "png", "jpg", "jpeg"]) == -1) {
          toast("tst_danger", "Please provide valid image format");
        }
        var oFReader = new FileReader();
        oFReader.readAsDataURL(document.getElementById("docfile").files[0]);
        var f = document.getElementById("docfile").files[0];
        var fsize = f.size || f.fileSize;
        if (fsize > 2000000) {
          toast("tst_danger", "Image File Size is very big");
        } else {
          let docUrlActn = $("#docUrlActn").text();
          let target = docUrlActn.split("-");
          let isCheckUrl = isCheck("base_url") + target[2];
          form_data.append("file", document.getElementById("docfile").files[0]);
          form_data.append("shoppId", isCheck("shoppId"));
          form_data.append("miAction", isCheck("miAction"));
          form_data.append("docType", target[1]);
          $.ajax({
            url: isCheckUrl,
            method: "POST",
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false,
            beforeSend: function () {
              $("#Update")
                .html('<i class="bx bx-cog bx-spin"></i> Wait....')
                .css("padding", "6px 13.2px 6px 16.5px");
            },
            success: function (data) {
              $("#Update")
                .css("padding", "6px 10px 6px 16.7px")
                .html('<i class="bx bx-save"></i> Upload');
              toastMultiShow(data.adClass, data.msg, data.icon);
              $("#docfile").val("");
              if (target[1] == "edtAadhar") {
                $("#adrImg").attr("src", isCheck("base_url") + data.img_loc);
              } else if (target[1] == "pancard") {
                $("#panImg").attr("src", isCheck("base_url") + data.img_loc);
              } else if (target[1] == "passbook") {
                $("#passBookImg").attr(
                  "src",
                  isCheck("base_url") + data.img_loc
                );
              }
            },
          });
        }
      }
    });
  $(".shopiActn")
    .unbind("click")
    .click(function () {
      //https://botfiller.com/

      let actNbtn = $(this).attr("data-id");
      let actnstr = actNbtn.split("-");
      $(".actnData").css("color", "#f56e50");
      if (actnstr[2] == "delAadhar") {
        $("#cnfDel_id").val(actNbtn + "/" + isCheck("shoppId"));
        $(".delMsg").html(
          '<i class="bx bx-trash"></i> Delete Aadhaar Document'
        );
        $(".actnData").html("Are you want to delete aadhaar document");
      } else if (actnstr[2] == "delPan") {
        $("#cnfDel_id").val(actNbtn + "/" + isCheck("shoppId"));
        $(".delMsg").html('<i class="bx bx-trash"></i> Delete Pan Document');
        $(".actnData").html("Are you want to delete pan document");
      } else if (actnstr[2] == "delBankpass") {
        $("#cnfDel_id").val(actNbtn + "/" + isCheck("shoppId"));
        $(".delMsg").html(
          '<i class="bx bx-trash"></i> Delete Passbook Document'
        );
        $(".actnData").html("Are you want to delete passbook document");
      } else if (actnstr[0] == "midoc") {
        $("#shopiDocFileUpload").toggle();
        $("html,body").animate(
          { scrollTop: $("#shopiDocFileUpload").offset().top },
          "slow"
        );
        $("#docUrlActn").html(actNbtn);
      }
    });
  $(".partAction")
    .unbind("keyup")
    .keyup(function () {
      let getId = $(this).attr("id");
      if (getId == "proName") {
        $("#proList").show();
        $("#soldBy").val("0");
        let imgloc = isCheck("base_url") + "media/images/loader.gif";
        $("#setProductList").html(
          '<li><img src="' + imgloc + '" class="loading_img"></li>'
        );
        let isCheckUrl = isCheck("base_url") + "partner/order/product_list";
        $.post(isCheckUrl, { proName: isCheck("proName") }, function (getData) {
          $("#setProductList").html(getData);
        });
      } else if (getId == "proQty") {
        let p_price = $("#p_price").text().split(" ");
        let tAmt = p_price[1] * $("#proQty").val();
        let discount = $("#tDiscount").text().split(" ");
        let tTax = $("#tTax").text().split(" ");

        let disAmt = tAmt - (discount[0] * tAmt) / 100;
        let netAmt = disAmt + (disAmt * tTax[0]) / 100;
        $("#tAmt").html(
          '<i class="bx bx-rupee inrP"></i> ' + disAmt.toFixed(2)
        );
        $("#tProPrice").html(
          '<i class="bx bx-rupee inrP"></i> ' + netAmt.toFixed(2)
        );
      } else if (getId == "packQty") {
        let p_price = $("#pcAmt").text().split(" ");
        let tAmt = p_price[1] * $("#packQty").val();
        $("#pcNetAmt").html(
          '<i class="bx bx-rupee inrP"></i> ' + tAmt.toFixed(2)
        );
      } else if (getId == "proNameByShop") {
        if (!isCheck("slrID")) {
          toast("tst_danger", "Please choose frenchise for purchasing");
        } else {
          $("#proList").show();
          $("#soldBy").val("spAdmn");
          let imgloc = isCheck("base_url") + "media/images/loader.gif";
          $("#setProductList").html(
            '<li><img src="' + imgloc + '" class="loading_img"></li>'
          );
          let isCheckUrl = isCheck("base_url") + "partner/order/by_shopee";
          $.post(
            isCheckUrl,
            { proName: isCheck("proNameByShop"), frenID: isCheck("slrID") },
            function (getData) {
              $("#setProductList").html(getData);
              $("#proNa").val("miProByShopee");
            }
          );
        }
      } else if (getId == "proNameSaleByShop") {
        if (!isCheck("byrID")) {
          toast("tst_danger", "Please input member id");
          point("byrID");
        } else {
          $("#proList").show();
          $("#soldBy").val("spAdmn");
          let imgloc = isCheck("base_url") + "media/images/loader.gif";
          $("#setProductList").html(
            '<li><img src="' + imgloc + '" class="loading_img"></li>'
          );
          let isCheckUrl = isCheck("base_url") + "partner/sale/by_shopee";
          $.post(
            isCheckUrl,
            { proName: isCheck("proNameSaleByShop"), frenID: isCheck("byrID") },
            function (getData) {
              $("#setProductList").html(getData);
              $("#proNa").val("miProByShopee");
            }
          );
        }
      } else if (getId == "proNameSaleByFrenchise") {
        if (!isCheck("buyerID")) {
          toast("tst_danger", "Please input buyer id");
        } else {
          $("#proList").show();
          let imgloc = isCheck("base_url") + "media/images/loader.gif";
          $("#setProductList").html(
            '<li><img src="' + imgloc + '" class="loading_img"></li>'
          );
          let isCheckUrl = isCheck("base_url") + "partner/sale/by_frenchise";
          $.post(
            isCheckUrl,
            {
              proName: isCheck("proNameSaleByFrenchise"),
              buyerID: isCheck("buyerID"),
            },
            function (getData) {
              $("#setProductList").html(getData);
              $("#proNa").val("miProByFrenchise");
            }
          );
        }
      }
    });
  $(".partAction")
    .unbind("mouseenter")
    .mouseenter(function () {
      let getId = $(this).attr("id");
      if (getId == "proName") {
        $("#proList").show();
        $("#soldBy").val("0");
        let imgloc = isCheck("base_url") + "media/images/loader.gif";
        $("#setProductList").html(
          '<li><img src="' + imgloc + '" class="loading_img"></li>'
        );
        let isCheckUrl = isCheck("base_url") + "partner/order/product_list";
        $.post(isCheckUrl, { proName: isCheck("proName") }, function (getData) {
          $("#setProductList").html(getData);
        });
      }
    });
  /*$(".partAction").unbind("mouseleave").mouseleave(function(){$('#proList').delay(5000).hide();});*/
  $("#cnfSaleItemDelete")
    .unbind("click")
    .click(function () {
      let actNbtn = $("#cnfSaleDel_id").val();
      let byrID = $("#byrID").val();
      let target = actNbtn.split("-");
      let sum = "";
      let isCheckUrl = isCheck("base_url") + target[1];
      $.post(
        isCheckUrl,
        { actn: target[0], dataId: target[2], byrID: byrID },
        function (htmlAmi) {
          if (htmlAmi.adClass == "tst_success") {
            $.each(htmlAmi.srCnt, function (index, value) {
              sum = 1 + index;
              $("#serial-" + value).html(sum + ".");
            });
            $("#delArv-" + htmlAmi.id).remove();
            $("#grantTotalAmt").html(htmlAmi.grandTotal);
            $("#delSaleData").html(htmlAmi.text).css("color", "#20AA00"); //E93700
            $("#deleteSaleModel").modal("hide");
          }
        },
        "json"
      );
    });

  $("#cnfOrdItemDeleteByShopee")
    .unbind("click")
    .click(function () {
      let actNbtn = $("#cnfOrdDel_idByShopee").val();
      let slrID = $("#slrID").val();
      let target = actNbtn.split("-");
      let sum = "";
      let isCheckUrl = isCheck("base_url") + target[1];
      $.post(
        isCheckUrl,
        { actn: target[0], dataId: target[2], slrID: slrID },
        function (htmlAmi) {
          //$('#delSaleData').html(htmlAmi);
          if (htmlAmi.adClass == "tst_success") {
            $.each(htmlAmi.srCnt, function (index, value) {
              sum = 1 + index;
              $("#serial-" + value).html(sum + ".");
            });
            $("#delArv-" + htmlAmi.id).remove();
            $("#grantTotalAmt").html(htmlAmi.grandTotal);
            $("#delSaleData").html(htmlAmi.text).css("color", "#20AA00"); //E93700
            $("#deleteOrdModelByShopee").modal("hide");
          }
        },
        "json"
      );
    });
});
function proManage(str, actn) {
  let isCheckUrl = isCheck("base_url") + "partner/profile/edit";
  if (actn == "personalInfo") {
    let msg = "";
    if (str == "1") {
      msg = "'personalInfo'";
      if (!isCheck("pNameE")) {
        toast("tst_danger", "Please enter your name");
        point("pNameE");
      } else if (!isCheck("genderE")) {
        toast("tst_danger", "Please select your gender");
      } else if (!isCheck("mobileE")) {
        toast("tst_danger", "Please enter your mobile number");
        point("mobileE");
      } else if (!isCheck("emailTE")) {
        toast("tst_danger", "Please enter your enter your email id");
        point("emailTE");
      } else if (!isCheck("dobE")) {
        toast("tst_danger", "Please enter your enter your date of birth");
        point("dobE");
      } else if (!isCheck("aadharE")) {
        toast("tst_danger", "Please enter your enter your aadhaar number");
        point("aadharE");
      } else if (!isCheck("addrrE")) {
        toast("tst_danger", "Please enter your enter your address");
        point("addrrE");
      } else if (!isCheck("zipcodeE")) {
        toast("tst_danger", "Please enter your enter your zipcode");
        point("zipcodeE");
      } else if (!isCheck("statN")) {
        toast("tst_danger", "Please select your state");
      } else if (!isCheck("district")) {
        toast("tst_danger", "Please select you district");
      } else if (!isCheck("panE")) {
        toast("tst_danger", "Please enter your enter your pan number");
        point("panE");
      } else {
        $("#prInf").html(
          '<button class="edtBtn btnIncR"><i class="bx bx-cog bx-spin"></i> Wait...</button>'
        );
        $.post(
          isCheckUrl,
          {
            pNameE: isCheck("pNameE"),
            genderE: isCheck("genderE"),
            mobileE: isCheck("mobileE"),
            emailTE: isCheck("emailTE"),
            dobE: isCheck("dobE"),
            aadharE: isCheck("aadharE"),
            addrrE: isCheck("addrrE"),
            zipcodeE: isCheck("zipcodeE"),
            stateE: isCheck("statN"),
            districtE: isCheck("district"),
            panE: isCheck("panE"),
            actn: "prInfo",
          },
          function (htmlAmi) {
            toast(htmlAmi.class, htmlAmi.text);
            if (htmlAmi.class == "tst_success") {
              $("#genderT").hide();
              $("#gender").show();
              $("#pName").html($("#pNameE").val());
              $("#gender").html($("#genderE").val());
              $("#mobile").html($("#mobileE").val());
              $("#emailT").html($("#emailTE").val());
              $("#dob").html($("#dobE").val());
              $("#aadhar").html($("#aadharE").val());
              $("#pan").html($("#panE").val());
              $("#addrr").html($("#addrrE").val());
              $("#zipcode").html($("#zipcodeE").val());
              $("#state").show();
              $("#stateE").hide();
              $("#districtE").hide();
              $("#distrt").show();
              $("#prInf").html(
                '<button class="edtBtn btnIncR" onclick="proManage(2,' +
                  msg +
                  ')"><i class="mdi mdi-comment-edit-outline"></i> Edit</button>'
              );
            }
          },
          "json"
        );
      }
    } else if (str == "2") {
      msg = "'personalInfo'";
      $("#pName").html(gethtmlTools("pNameE", $("#pName").text()));
      $("#pan").html(gethtmlTools("panE", $("#pan").text()));
      $("#panE").addClass("mblW");
      $("#gender").hide();
      $("#genderT").show();
      $("#mobile").html(gethtmlTools("mobileE", $("#mobile").text()));
      $("#mobileE").addClass("mblW");
      $("#emailT").html(gethtmlTools("emailTE", $("#emailT").text()));
      $("#emailTE").css("width", "60%");
      $("#dob").html(gethtmlTools("dobE", $("#dob_t").val()));
      $("#dobE").attr("type", "date").css("width", "60%");
      $("#aadhar").html(gethtmlTools("aadharE", $("#aadhar").text()));
      $("#aadharE").addClass("mblW");
      $("#addrr").html(gethtmlTools("addrrE", $("#addrr").text()));
      $("#zipcode").html(gethtmlTools("zipcodeE", $("#zipcode").text()));
      $("#zipcodeE").addClass("mblW");
      $("#state").hide();
      $("#stateE").show();
      $("#distrt").hide();
      $("#districtE").show();
      $("#prInf").html(
        '<button class="updtBtn btnIncR" onclick="proManage(1,' +
          msg +
          ')"><i class="mdi mdi-comment-edit-outline"></i> Update</button>'
      );
    }
  } else if (actn == "bankingInfor") {
    let msg = "";

    if (str == "1") {
      msg = "'bankingInfor'";
      if (!isCheck("bNameE")) {
        toast("tst_danger", "Please enter your bank name");
        point("bNameE");
      } else if (!isCheck("acNumberE")) {
        toast("tst_danger", "Please enter your bank account number");
        point("acNumberE");
      } else if (!isCheck("ifscE")) {
        toast("tst_danger", "Please enter your bank ifsc code");
        point("ifscE");
      } else if (!isCheck("brNameE")) {
        toast("tst_danger", "Please enter your bank branch");
        point("brNameE");
      } else {
        $("#bnkInf").html(
          '<button class="edtBtn btnIncR"><i class="bx bx-cog bx-spin"></i> Wait...</button>'
        );
        $.post(
          isCheckUrl,
          {
            bName: isCheck("bNameE"),
            acNumber: isCheck("acNumberE"),
            ifsc: isCheck("ifscE"),
            brName: isCheck("brNameE"),
            actn: "bnkInfo",
          },
          function (htmlAmi) {
            toast(htmlAmi.class, htmlAmi.text);
            if (htmlAmi.class == "tst_success") {
              $("#bName").html($("#bNameE").val());
              $("#acNumber").html($("#acNumberE").val());
              $("#ifsc").html($("#ifscE").val());
              $("#brName").html($("#brNameE").val());
              $("#bnkInf").html(
                '<button class="edtBtn btnIncR" onclick="proManage(2,' +
                  msg +
                  ')"><i class="mdi mdi-comment-edit-outline"></i> Edit</button>'
              );
            }
          },
          "json"
        );
      }
    } else if (str == "2") {
      msg = "'bankingInfor'";
      $("#bName").html(gethtmlTools("bNameE", $("#bName").text()));
      $("#bNameE").css("width", "60%");
      $("#acNumber").html(gethtmlTools("acNumberE", $("#acNumber").text()));
      $("#acNumberE").css("width", "55%");

      $("#ifsc").html(gethtmlTools("ifscE", $("#ifsc").text()));
      $("#ifscE").css("width", "60%");
      $("#brName").html(gethtmlTools("brNameE", $("#brName").text()));
      $("#brNameE").css("width", "55%");
      $("#bnkInf").html(
        '<button class="updtBtn btnIncR" onclick="proManage(1,' +
          msg +
          ')"><i class="mdi mdi-comment-edit-outline"></i> Update</button>'
      );
    }
  } else if (actn == "nomineeInfor") {
    let msg = "";
    $("#nomineeInf").html(
      '<button class="edtBtn btnIncR"><i class="bx bx-cog bx-spin"></i> Wait...</button>'
    );
    if (str == "1") {
      msg = "'nomineeInfor'";
      if (!isCheck("nomineeNameE")) {
        toast("tst_danger", "Please enter your nominee name");
        point("nomineeNameE");
      } else if (!isCheck("nomineeRelationE")) {
        toast("tst_danger", "Please enter your nominee relationship");
        point("nomineeRelationE");
      } else if (!isCheck("nomineeAddrE")) {
        toast("tst_danger", "Please enter your nominee address");
        point("nomineeAddrE");
      } else {
        $.post(
          isCheckUrl,
          {
            nomineeName: isCheck("nomineeNameE"),
            nomineeRelation: isCheck("nomineeRelationE"),
            nomineeAddr: isCheck("nomineeAddrE"),
            actn: "nomineeInfo",
          },
          function (htmlAmi) {
            toast(htmlAmi.class, htmlAmi.text);
            if (htmlAmi.class == "tst_success") {
              $("#nomineeName").html($("#nomineeNameE").val());
              $("#nomineeRelation").html($("#nomineeRelationE").val());
              $("#nomineeAddr").html($("#nomineeAddrE").val());
              $("#nomineeInf").html(
                '<button class="edtBtn btnIncR" onclick="proManage(2,' +
                  msg +
                  ')"><i class="mdi mdi-comment-edit-outline"></i> Edit</button>'
              );
            }
          },
          "json"
        );
      }
    } else if (str == "2") {
      msg = "'nomineeInfor'";
      $("#nomineeName").html(
        gethtmlTools("nomineeNameE", $("#nomineeName").text())
      );
      $("#nomineeNameE").css("width", "60%");
      $("#nomineeRelation").html(
        gethtmlTools("nomineeRelationE", $("#nomineeRelation").text())
      );
      $("#nomineeRelationE").css("width", "55%");
      $("#nomineeAddr").html(
        gethtmlTools("nomineeAddrE", $("#nomineeAddr").text())
      );
      $("#ifscE").css("width", "60%");
      $("#nomineeInf").html(
        '<button class="updtBtn btnIncR" onclick="proManage(1,' +
          msg +
          ')"><i class="mdi mdi-comment-edit-outline"></i> Update</button>'
      );
    }
  }
}
function camKart(str) {
  let isCheckUrl = isCheck("base_url") + "partner/order/set_kart_product";
  $.post(
    isCheckUrl,
    { proId: str },
    function (getData) {
      //$('#myResultShow').html(getData);
      //let proPrice=parseInt(getData.product_price)+parseInt((getData.product_price*getData.productTax)/100);
      $("#bv").html(getData.productBV);
      $("#mrp").html('<i class="bx bx-rupee inrP"></i> ' + getData.mrp);
      $("#proID").val(getData.id);
      $("#p_price").html(
        '<i class="bx bx-rupee inrP"></i> ' + getData.product_price
      );
      $("#proName").val(getData.product_name);
      $("#proList").hide();
      $("#tDiscount").html(
        getData.discount + ' <i class="mdi mdi-percent-outline fntClr"></i>'
      );
      $("#tTax").html(
        getData.productTax + ' <i class="mdi mdi-percent-outline inrR"></i>'
      );
      if (isCheck("proQty")) {
        let tAmt = $("#p_price").text() * $("#proQty").val();
        let discount = $("#tDiscount").text().split(" ");
        let netAmt = tAmt - (discount[0] * tAmt) / 100;
        $("#tAmt").html('<i class="bx bx-rupee inrP"></i> ' + tAmt.toFixed(2));
        $("#tProPrice").html(
          '<i class="bx bx-rupee inrP"></i> ' + netAmt.toFixed(2)
        );
      } else {
        $("#tAmt").html("-----");
        $("#tProPrice").html("-----");
      }
      $("#proQty").focus();
    },
    "json"
  );
}
function addTempKart() {
  if (isCheck("soldBy") == "spAdmn") {
    if (!isCheck("proName")) {
      toast("tst_danger", "Please input product name");
      point("proName");
    }
  } else if (!isCheck("proQty")) {
    toast("tst_danger", "Please input product quantity");
    point("proQty");
  } else {
    let isCheckUrl = isCheck("base_url") + "partner/order/addTempKart";
    let pQty = isCheck("proQty");
    $.post(
      isCheckUrl,
      {
        proID: isCheck("proID"),
        proQty: isCheck("proQty"),
        soldBy: isCheck("soldBy"),
      },
      function (getData) {
        $("#data_not_found").remove();
        $("#miWidth").css("width", "85.75%");
        $("#proName,#proQty").val("");
        $("#mrp,#p_price,#tAmt,#tDiscount,#tProPrice,#bv,#tTax").html("----");
        $("#proNameByShop").val("");
        if (getData.miResult == "success") {
          toast(getData.adClass, getData.msg);
          $("#tempKartTble tbody").append(getData.text);
          $("#grantTotalAmt").html(getData.grndT);
        } else if (getData.miResult == "miRowUpdate") {
          toast(getData.adClass, getData.msg);
          $("#pQty--" + getData.rowUpdate).html(getData.text.qty);
          $("#tAmt--" + getData.rowUpdate).html(getData.text.tAmt);
          $("#netAmt--" + getData.rowUpdate).html(getData.text.netAmt);
          $("#grantTotalAmt").html(getData.grndT);
        } else if (getData.miResult == "warning") {
          toast(getData.adClass, getData.text);
        } else if (getData.miResult == "error") {
          toast(getData.adClass, getData.text);
          $("#proQty").val(pQty);
        } else {
          toast("tst_warning", getData.text);
        }
      },
      "json"
    );
  }
}
function delTempKart(str) {
  let actnVal = str.split("@@@@");
  $(".delMsg").html("Delete Kart Product");
  $(".actnData").html("Are you sure want to delete " + actnVal[1]);
  $("#cnfDel_id").val(
    "delTempProduct-partner/order/tempProductDelete-" + actnVal[0]
  );
  $("#deleteModel").modal("show");
}
function toastMultiShow(adCls, msg, icon) {
  let valid = "";
  let myClass = "tst_success tst_warning tst_danger";
  let restCls = myClass.replace(adCls, " ");
  let addonMsg = "";
  $.each(msg, function (i, item) {
    valid += "<li>" + item + "</li>";
  });
  $(".tst_danger").addClass("ts_dan");
  $(".tst_warning").addClass("ts_war");
  if (adCls == "tst_success") {
    addonMsg = icon + " <ul>" + valid + "</ul>";
  } else if (adCls == "tst_danger") {
    addonMsg = icon + " <ul>" + valid + "</ul>";
  } else if (adCls == "tst_warning") {
    addonMsg = icon + " <ul>" + valid + "</ul>";
  }
  $(".ami_toast")
    .css("visibility", "visible")
    .html(addonMsg)
    .addClass(adCls)
    .removeClass(restCls);
  setTimeout(function () {
    $(".ami_toast").css("visibility", "hidden");
  }, 2000);
}
function camKartByShopee(str) {
  let isCheckUrl = isCheck("base_url") + "partner/order/kart_product_by_shopee";
  $.post(
    isCheckUrl,
    { proId: str, frenId: isCheck("slrID") },
    function (getData) {
      //  $('#myResultShow').html(getData);
      $("#mrp").html('<i class="bx bx-rupee inrP"></i> ' + getData.mrp);
      $("#bv").html(getData.productBV);
      $("#proID").val(getData.id);
      $("#soldBy").val(getData.soldBy);
      $("#p_price").html(
        '<i class="bx bx-rupee inrP"></i> ' + getData.product_price
      );
      $("#proNameByShop").val(getData.product_name);
      $("#proList").hide();
      $("#tDiscount").html(
        getData.discount + ' <i class="mdi mdi-percent-outline fntClr"></i>'
      );
      $("#tTax").html(
        getData.productTax + ' <i class="mdi mdi-percent-outline inrR"></i>'
      );
      if (isCheck("proQty")) {
        let tAmt = $("#p_price").text() * $("#proQty").val();
        let discount = $("#tDiscount").text().split(" ");
        let netAmt = tAmt - (discount[0] * tAmt) / 100;
        $("#tAmt").html('<i class="bx bx-rupee inrP"></i> ' + tAmt.toFixed(2));
        $("#tProPrice").html(
          '<i class="bx bx-rupee inrP"></i> ' + netAmt.toFixed(2)
        );
      } else {
        $("#tAmt").html("-----");
        $("#tProPrice").html("-----");
      }

      $("#proQty").focus();
    },
    "json"
  );
}
function camSaleByShopee(str) {
  let isCheckUrl = isCheck("base_url") + "partner/sale/kart_product_by_shopee";
  $.post(
    isCheckUrl,
    { proId: str },
    function (getData) {
      //  $('#myResultShow').html(getData);
      $("#mrp").html('<i class="bx bx-rupee inrP"></i> ' + getData.mrp);
      $("#pBV").html(getData.productBV);
      $("#tTax").html(
        getData.productTax + ' <i class="mdi mdi-percent-outline inrR"></i>'
      );
      $("#proID").val(getData.id);
      $("#soldBy").val(getData.soldBy);
      $("#p_price").html(
        '<i class="bx bx-rupee inrP"></i> ' + getData.product_price
      );
      $("#proNameSaleByShop").val(getData.product_name);
      $("#proList").hide();
      $("#tDiscount").html(
        getData.discount + ' <i class="mdi mdi-percent-outline fntClr"></i>'
      );

      if (isCheck("proQty")) {
        let tAmt = $("#p_price").text() * $("#proQty").val();
        let discount = $("#tDiscount").text().split(" ");
        let netAmt = tAmt - (discount[0] * tAmt) / 100;
        $("#tAmt").html('<i class="bx bx-rupee inrP"></i> ' + tAmt.toFixed(2));
        $("#tProPrice").html(
          '<i class="bx bx-rupee inrP"></i> ' + netAmt.toFixed(2)
        );
      } else {
        $("#tAmt").html("-----");
        $("#tProPrice").html("-----");
      }

      $("#proQty").focus();
    },
    "json"
  );
}

function delSaleTempKartByShopee(str) {
  let actnVal = str.split("@@@@");
  $("#saleMsg").html("Delete Sale Product");
  $("#delSaleData")
    .html("Are you sure want to delete " + actnVal[1])
    .css("color", "#f56e50");
  $("#cnfOrdDel_idByShopee").val(
    "delTempSaleProduct-partner/order/trashTempProduct-" + actnVal[0]
  );
  $("#deleteOrdModelByShopee").modal("show");
}

function camSaleByFrenchise(str) {
  let isCheckUrl =
    isCheck("base_url") + "partner/sale/kart_by_frenchise_to_shopee";
  $.post(
    isCheckUrl,
    { proId: str },
    function (getData) {
      //$('#myResultShow').html(getData).show();
      $("#mrp").html('<i class="bx bx-rupee inrP"></i> ' + getData.mrp);
      $("#proID").val(getData.id);
      $("#soldBy").val(getData.soldBy);
      $("#tTax").html(
        getData.productTax + ' <i class="mdi mdi-percent-outline inrR"></i>'
      );
      $("#p_price").html(
        '<i class="bx bx-rupee inrP"></i> ' + getData.product_price
      );
      $("#proNameSaleByFrenchise").val(getData.product_name);
      $("#proList").hide();
      $("#tDiscount").html(
        getData.discount + ' <i class="mdi mdi-percent-outline fntClr"></i>'
      );
      $("#avlPrQty").val(getData.quantity);
      $("#pBV").html(getData.productBV);
      if (isCheck("proQty")) {
        let tAmt = $("#p_price").text() * $("#proQty").val();
        let discount = $("#tDiscount").text().split(" ");
        let netAmt = tAmt - (discount[0] * tAmt) / 100;
        $("#tAmt").html('<i class="bx bx-rupee inrP"></i> ' + tAmt.toFixed(2));
        $("#tProPrice").html(
          '<i class="bx bx-rupee inrP"></i> ' + netAmt.toFixed(2)
        );
      } else {
        $("#tAmt").html("-----");
        $("#tProPrice").html("-----");
      }
      $("#proQty").focus();
    },
    "json"
  );
}
function createPackageSale() {
  if (!isCheck("buyerID")) {
    toast("tst_danger", "Please input buyer member id");
    point("buyerID");
  } else if (!isCheck("package")) {
    toast("tst_danger", "Please choose package name");
  } else if (!isCheck("packQty")) {
    toast("tst_danger", "Please input package quantity");
    point("packQty");
  } else {
    let isCheckUrl =
      isCheck("base_url") + "mlm_software/admin/sale/tempPackKart";
    let pQty = isCheck("packQty");
    $(".amisingh").show();
    $.post(
      isCheckUrl,
      {
        package: isCheck("package"),
        packQty: isCheck("packQty"),
        buyerID: isCheck("byrID"),
        busr: isCheck("buyerID"),
      },
      function (getData) {
        // $('#myResultShow').html(getData);
        if (getData.miResult == "miRowUpdate") {
          //$('#myResultShow').html('Success Details');
          $("#grantTotalAmt").html(getData.grndT);
          $("#netAmt--" + getData.rowUpdate).html(getData.text.netAmt);
          $("#netPaybleAmt").html(getData.netPay);
          toast(getData.adClass, getData.msg);
          $("#pcAmt,#pcBv,#pcNetAmt").html(
            '<div style="margin-top:-5px;">-----</div>'
          );
          $("#packQty").val("");
          document.getElementById("package").selectedIndex = 0;
          $("#pQty--" + getData.rowUpdate).html(getData.text.qty);
        } else if (getData.miResult == "success") {
          $("#pcAmt,#pcBv,#pcNetAmt").html("-----");
          $("#packQty").val("");
          document.getElementById("package").selectedIndex = 0;
          $("#pQty--" + getData.rowUpdate).html(getData.text.qty);
          toast(getData.adClass, getData.msg);
          $("#data_not_found").remove();
          //$('#tempKartTble tbody').append(getData.text);
          $(getData.text).insertAfter($("#tempKartTble tr.dynamicRows:last"));
          $("#grantTotalAmt").html(
            getData.grndT
          ); /*$("#netPaybleAmt").html(getData.netPaybleAmt);$("#texPer").html(getData.tax);*/
        }
      },
      "json"
    );
    //toast('tst_success','Thank you you have successfully done');
  }
}
function createSale() {
  if (!isCheck("buyerID")) {
    toast("tst_danger", "Please input buyer id");
    point("buyerID");
  } else if (!isCheck("proNa")) {
    toast("tst_danger", "Please input product name");
    if (isCheck("proNa") == "miProByFrenchise") {
      point("proNameSaleByFrenchise");
    } else {
      point("proNameByShop");
    }
  } else if (!isCheck("proQty")) {
    toast("tst_danger", "Please input product quantity");
    point("proQty");
  } else if (isNaN(isCheck("proQty"))) {
    toast("tst_danger", "Please input valid product quantity");
    point("proQty");
  } else if (parseInt(isCheck("proQty")) > parseInt(isCheck("avlPrQty"))) {
    toast(
      "tst_danger",
      "Oops you have only " + isCheck("avlPrQty") + " quantity"
    );
    point("proQty");
  } else {
    let isCheckUrl = isCheck("base_url") + "partner/sale/addTempKart";
    let pQty = isCheck("proQty");
    $.post(
      isCheckUrl,
      {
        proID: isCheck("proID"),
        proQty: isCheck("proQty"),
        buyerID: isCheck("byrID"),
      },
      function (getData) {
        //$("#myResultShow").html(getData);
        let check = "";

        if (getData.miResult == "success") {
          check = "success";
          toast(getData.adClass, getData.msg);
          $("#tempKartTble tbody").append(getData.text);
          $("#grantTotalAmt").html(getData.grndT);
        } else if (getData.miResult == "miRowUpdate") {
          check = "success";
          toast(getData.adClass, getData.msg);
          $("#pQty--" + getData.rowUpdate).html(getData.text.qty);
          $("#tAmt--" + getData.rowUpdate).html(getData.text.tAmt);
          $("#netAmt--" + getData.rowUpdate).html(getData.text.netAmt);
          $("#grantTotalAmt").html(getData.grndT);
        } else if (getData.miResult == "warning") {
          toast(getData.adClass, getData.text);
          check = "";
        } else if (getData.miResult == "error") {
          toast(getData.adClass, getData.text);
          $("#proQty").val(pQty);
          check = "";
        } else {
          toast("tst_warning", getData.text);
          check = "";
        }

        if (check == "success") {
          $("#data_not_found").remove();
          $("#miWidth").css("width", "85.75%");
          $("#proName,#proQty").val("");
          $("#proNameSaleByShop").val("");
          $("#mrp,#p_price,#tAmt,#tDiscount,#tProPrice,#pBV,#tTax").html(
            "----"
          );
          $("#proNameSaleByFrenchise").val("");
        }
      },
      "json"
    );
  }
}
function makepayment() {
  if (!isCheck("buyerID")) {
    toast("tst_danger", "Please input buyer id");
    point("buyerID");
    return false;
  } else {
    toast("tst_success", "Thank You! Now you are able to make paymnet");
    return true;
  }
}
function delSaleTempKart(str) {
  let actnVal = str.split("@@@@");
  $("#saleMsg").html("Delete Sale Product");
  $("#delSaleData")
    .html("Are you sure want to delete " + actnVal[1])
    .css("color", "#f56e50");
  $("#cnfSaleDel_id").val(
    "delTempSaleProduct-partner/sale/manage-" + actnVal[0]
  );
  $("#deleteSaleModel").modal("show");
}
function delPackTempKart(str) {
  let actnVal = str.split("@@@@");
  $("#saleMsg").html("Delete Package");
  $("#delSaleData")
    .html("Are you sure want to delete " + actnVal[1])
    .css("color", "#f56e50");
  $("#cnfSaleDel_id").val(
    "delTemPackage-mlm_software/admin/sale/package/-" + actnVal[0]
  );
  $("#deleteSaleModel").modal("show");
}
function makePayPackage() {
  if (!isCheck("paybleAmt")) {
    toast("tst_danger", "Please input payble amount");
    point("paybleAmt");
    return false;
  } else {
    toast("tst_success", "Thank You! Now you are able to make paymnet");
    return true;
  }
}
